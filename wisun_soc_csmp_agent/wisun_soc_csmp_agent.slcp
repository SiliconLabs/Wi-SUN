project_name: "wisun_soc_csmp_agent"
label: "Wi-SUN - SoC Csmp Agent Sample Application"
description: "Csmp Agent smaple application skeleton"
package: "wisun"
category: "Wi-SUN Examples"
quality: "internal"

component:
# for wisun stack and default components
  - id: "segger_rtt"
  - id: "wisun_stack"
  - id: "wisun_stack_lfn"
  - id: "wisun_stack_ffn"
  - id: "wisun_stack_debug"
  - id: "sl_system"
  - id: clock_manager
  - id: device_init
  - id: board_control
    condition: [hardware_board]
  - id: "sleeptimer"
  - id: "nvm3_default"
  - id: "freertos"
# other periphery
  - id: "simple_button"
    instance:
      - btn0
      - btn1
# radio config
  - id: "wisun_full_radioconf"
# SDK components
  - id: "sl_wisun_trace_util"
  - id: "sl_wisun_app_core"
  - id: "sl_wisun_app_setting"
  - id: "sl_wisun_app_cli"
  - id: "sl_wisun_ping"
  - id: "cli"
    instance:
      - vcom

requires:
  - name: "cmsis_rtos2"
  - name: freertos_heap_3
    condition: [freertos]
  - name: "sl_wisun_mode_switch"
    condition:
      - "device_sdid_220" # only for these devices
source:
  - path: "../component/csmp_agent/sample/CsmpAgentLib_sample.c"
  - path: "../component/csmp_agent/sample/CsmpAgentLib_sample_util.c"
  - path: "../component/csmp_agent/sample/CsmpAgentLib_sample_tlvs.c"
  - path: "../component/csmp_agent/sample/signature_verify.c"
  - path: "../component/csmp_agent/sample/tlvs/efr32_wisun_tlvs.c"

  # NTP Time sync sources
  - path: "../component/ntp_timesync/sl_wisun_ntp_timesync.c"
    directory: "component/ntp_timesync"

  # Csmp Agent sources
  - path: "../component/csmp_agent/osal/efr32_wisun/osal_efr32_wisun.c"
    directory: "component/csmp_agent/osal/efr32_wisun"

  - path: "../component/csmp_agent/src/csmpagent/csmp_ipRouteRplMetrics.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_tlvindex.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_reportSubscribe.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_currenttime.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_interfaceMetrics.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_firmwareImageInfo.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_hardwareDesc.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_deviceid.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_interfaceDesc.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmpagent.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_sessionId.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_group.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_ipRoute.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_vendor.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_cgms.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_rplInstance.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_wpanStatus.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_uptime.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_ipAddress.c"
    directory: "component/csmp_agent/src/csmpagent"
  - path: "../component/csmp_agent/src/csmpagent/csmp_signature.c"
    directory: "component/csmp_agent/src/csmpagent"

  - path: "../component/csmp_agent/src/csmpagent/tlvs/CsmpTlvs.pb-c.c"
    directory: "component/csmp_agent/src/csmpagent/tlvs"

  - path: "../component/csmp_agent/src/csmpservice/cgmsagent.c"
    directory: "component/csmp_agent/src/csmpservice"
  - path: "../component/csmp_agent/src/csmpservice/csmpserver.c"
    directory: "component/csmp_agent/src/csmpservice"

  - path: "../component/csmp_agent/src/csmpapi/csmpservice.c"
    directory: "component/csmp_agent/src/csmpapi"

  - path: "../component/csmp_agent/src/lib/protobuf-c/protobuf-c.c"
    directory: "component/csmp_agent/src/lib/protobuf-c"

  - path: "../component/csmp_agent/src/csmptlv/csmptlv.c"
    directory: "component/csmp_agent/src/csmptlv"
  - path: "../component/csmp_agent/src/csmptlv/ProtobufVarint.c"
    directory: "component/csmp_agent/src/csmptlv"

  - path: "../component/csmp_agent/src/coap/coapclient.c"
    directory: "component/csmp_agent/src/coap"
  - path: "../component/csmp_agent/src/coap/coapserver.c"
    directory: "component/csmp_agent/src/coap"


include:

  # NTP Time sync includes
  - path: "../component/ntp_timesync"
    file_list:
      - "path": "sl_wisun_ntp_timesync.h"
    directory: "component/ntp_timesync"
  - path: "../component/ntp_timesync/config"
    file_list:
    - path: "sl_wisun_ntp_timesync_config.h"
    directory: "config"
  
  # Csmp Agent includes
  - path: "../component/csmp_agent/sample"
    file_list:
    - path: "CsmpAgentLib_sample_config.h"
    - path: "signature_verify.h"
    - path: "CsmpAgentLib_sample_util.h"
    - path: "CsmpAgentLib_sample.h"
    - path: "CsmpAgentLib_sample_tlvs.h"

  - path: "../component/csmp_agent/include"
    file_list:
    - "path": "csmp_service.h"
    - "path": "csmp_info.h"
    directory: "component/csmp_agent/include"

  - path: "../component/csmp_agent/osal/efr32_wisun"
    file_list:
    - "path": "osal_platform_types.h"
    directory: "component/csmp_agent/osal/efr32_wisun"

  - path: "../component/csmp_agent/osal"
    file_list:
    - "path": "osal.h"
    directory: "component/csmp_agent/osal"

  - path: "../component/csmp_agent/sample"
    file_list:
    - "path": "CsmpAgentLib_sample_config.h"
    - "path": "signature_verify.h"
    - "path": "CsmpAgentLib_sample_util.h"
    - "path": "CsmpAgentLib_sample.h"
    - "path": "CsmpAgentLib_sample_tlvs.h"
    directory: "component/csmp_agent/sample"

  - path: "../component/csmp_agent/src/csmpagent"
    file_list:
    - "path": "csmpagent.h"
    - "path": "csmp.h"
    - "path": "csmpfunction.h"
    directory: "component/csmp_agent/src/csmpagent"

  - path: "../component/csmp_agent/src/csmpagent/tlvs"
    file_list:
    - "path": "CsmpTlvs.pb-c.h"
    directory: "component/csmp_agent/src/csmpagent/tlvs"

  - path: "../component/csmp_agent/src/csmpservice"
    file_list:
    - "path": "csmpserver.h"
    - "path": "cgmsagent.h"
    directory: "component/csmp_agent/src/csmpservice"
  
  - path: "../component/csmp_agent/src/csmpapi"
    file_list:
    - "path": "csmpinfo.h"
    - "path": "csmpservice.h"
    directory: "component/csmp_agent/src/csmpapi"

  - path: "../component/csmp_agent/src/lib"
    file_list:
    - "path": "debug.h"
    directory: "component/csmp_agent/src/lib"

  - path: "../component/csmp_agent/src/lib/protobuf-c"
    file_list:
    - "path": "protobuf-c.h"
    directory: "component/csmp_agent/src/lib/protobuf-c"

  - path: "../component/csmp_agent/src/csmptlv"
    file_list:
    - "path": "ProtobufVarint.h"
    - "path": "csmptlv.h"
    directory: "component/csmp_agent/src/csmptlv"

  - path: "../component/csmp_agent/src/coap"
    file_list:
    - "path": "coap.h"
    - "path": "coapserver.h"
    - "path": "coapclient.h"
    directory: "component/csmp_agent/src/coap"

define:
  - name: "DEBUG_EFM"
  - name: "OSAL_EFR32_WISUN"
configuration:
  - name: "SL_BOARD_ENABLE_VCOM"
    value: "1"
  - name: "SL_IOSTREAM_USART_VCOM_FLOW_CONTROL_TYPE"
    value: "usartHwFlowControlNone"
  - name: "SL_IOSTREAM_USART_VCOM_CONVERT_BY_DEFAULT_LF_TO_CRLF"
    value: "1"
  - name: SL_CLI_LOCAL_ECHO
    value: "(1)"
  - name: "SL_IOSTREAM_EUSART_VCOM_FLOW_CONTROL_TYPE"
    value: "eusartHwFlowControlNone"
  - name: "SL_IOSTREAM_EUSART_VCOM_CONVERT_BY_DEFAULT_LF_TO_CRLF"
    value: "1"
  - name: "SL_IOSTREAM_USART_VCOM_RX_BUFFER_SIZE"
    value: "128"
    condition: [iostream_usart]
  - name: "SL_IOSTREAM_EUSART_VCOM_RX_BUFFER_SIZE"
    value: "128"
    condition: [iostream_eusart]
  - name: "SL_IOSTREAM_LEUART_VCOM_RX_BUFFER_SIZE"
    value: "128"
    condition: [iostream_leuart]
  - name: "OS_CFG_APP_HOOKS_EN"
    value: "1"
    condition: [micriumos_kernel]
  - name: "configUSE_POSIX_ERRNO"
    value: "1"
    condition: [freertos]
  - name: "OS_CFG_ERRNO_EN"
    value: "1"
    condition: [micriumos_kernel]
  - name: SL_RAIL_UTIL_PTI_BAUD_RATE_HZ
    value: "3200000"
  - name: SL_SLEEPTIMER_WALLCLOCK_CONFIG
    value: "1"
  - name: configTIMER_TASK_STACK_DEPTH
    value: "4096"

  # SDK components config specialization
  - name: "SL_WISUN_PING_MAX_PAYLOAD_LENGTH"
    value: "1024"
  - name: "SL_WISUN_PING_PACKET_INTERVAL"
    value: "1"
  - name: "WISUN_NETWORK_SIZE"
    value: "SL_WISUN_NETWORK_SIZE_SMALL"
  - name: "APP_PROJECT_INFO_WISUN_VERSION_ENABLED"
    value: "1"
  - name: "APP_PROJECT_INFO_MBEDTLS_VERSION_ENABLED"
    value: "1"

  # LFN related peripheral and energy saver setup
  - name: SL_IOSTREAM_EUSART_INSTANCE_RESTRICT_ENERGY_MODE_TO_ALLOW_RECEPTION
    value: 0
    condition: [iostream_eusart,power_manager]
  - name: SL_IOSTREAM_EUSART_VCOM_BAUDRATE
    value: 9600
    condition: [iostream_eusart,power_manager]
  - name: SL_IOSTREAM_EUSART_VCOM_ENABLE_HIGH_FREQUENCY
    value: 0
    condition: [iostream_eusart,power_manager]
  - name: SL_IOSTREAM_EUSART_VCOM_RESTRICT_ENERGY_MODE_TO_ALLOW_RECEPTION
    value: 0
    condition: [iostream_eusart,power_manager]
  - name: SL_IOSTREAM_LEUART_VCOM_RESTRICT_ENERGY_MODE_TO_ALLOW_RECEPTION
    value: 0
    condition: [iostream_leuart,power_manager]
  - name: "SL_CLOCK_MANAGER_EUSART0CLK_SOURCE"
    value: "CMU_EUSART0CLKCTRL_CLKSEL_LFXO"
    condition: [iostream_leuart,power_manager]
  - name: "SL_CLOCK_MANAGER_EUSART0CLK_SOURCE"
    value: "CMU_EUSART0CLKCTRL_CLKSEL_LFXO"
    condition: [iostream_eusart,power_manager]

  # SDK memory configuration
  - name: "SL_WISUN_COAP_RESOURCE_HND_SOCK_BUFF_SIZE"
    value: "2048"
  - name: "SL_WISUN_COAP_RESOURCE_HND_STACK_SIZE_WORD"
    value: "512"
  - name: "SL_GUI_STACK_SIZE_WORD"
    value: "256"
  - name: "SL_DISPLAY_STACK_SIZE_WORD"
    value: "384"
  - name: "SL_WISUN_PING_STACK_SIZE_WORD"
    value: "256"
  - name: "SL_IPERF_STACK_SIZE_WORD"
    value: "256"

# SDK Application version
  - name: APP_PROJECT_INFO_APP_VERSION_MAJOR
    value: 2
  - name: APP_PROJECT_INFO_APP_VERSION_MINOR
    value: 0
  - name: APP_PROJECT_INFO_APP_VERSION_PATCH
    value: 0

ui_hints:
  highlight:
    - path: "config/wisun/wisun_settings.wisunconf"
    - path: readme.md
      focus: true

#--------------------- Toolchain ------------------------
toolchain_settings:
  - option: optimize
    value: debug

tag:
  - prebuilt_demo

filter:
  - name: "Wireless Technology"
    value: ["Wi-SUN"]
  - name: "Device Type"
    value: ["SoC"]
  - name: "Project Difficulty"
    value: ["Advanced"]
